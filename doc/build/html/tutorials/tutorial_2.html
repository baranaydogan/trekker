<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Tutorial 2: Trekker’s pathways &#8212; trekker 1.0b documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=12dfc556" />
    <script src="../_static/documentation_options.js?v=c9538944"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Tutorial 3: Python package usage" href="tutorial_3.html" />
    <link rel="prev" title="Tutorial 1: The short trek" href="tutorial_1.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="tutorial-2-trekker-s-pathways">
<h1>Tutorial 2: Trekker’s pathways<a class="headerlink" href="#tutorial-2-trekker-s-pathways" title="Link to this heading">¶</a></h1>
<p>This tutorial shows how to specify pathway rules in Trekker. Before describing the rules in detail, please check the illustration below for definitions that Trekker use.</p>
<figure class="align-default" id="id1">
<img alt="Trekker's pathways" src="../_images/tut2_0.svg" /><figcaption>
<p><span class="caption-text">Trekker regards each streamline to be composed of two sides which are called <strong>pathway_A</strong> and <strong>pathway_B</strong>. Pathway rules can be specified for each side separately or the complete <strong>pathway</strong> as a whole.</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>Trekker automatically determines the sides as <strong>pathway_A</strong> or <strong>pathway_B</strong> based on how they meet the user defined pathway constraints, i.e., if the first side meets the criteria for <strong>B</strong> then trekker assigns it as pathway <strong>B</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can also disable the default &quot;two-sided&quot; tracking by setting <strong>-directionality=one_sided</strong> . In this case, you can only specify rules using the <strong>-pathway=</strong> option.</p>
</div>
<section id="defining-pathway-rules">
<h2>Defining pathway rules<a class="headerlink" href="#defining-pathway-rules" title="Link to this heading">¶</a></h2>
<p>Trekker provides powerful options for specifying pathways. Rules can be defined using one of:</p>
<ul class="simple">
<li><p><strong>-pathway=</strong></p></li>
<li><p><strong>-pathway_A=</strong></p></li>
<li><p><strong>-pathway_B=</strong></p></li>
</ul>
<p>followed by one of:</p>
<ul class="simple">
<li><p><strong>require_entry</strong></p></li>
<li><p><strong>stop_at_entry</strong></p></li>
<li><p><strong>require_exit</strong></p></li>
<li><p><strong>stop_at_exit</strong></p></li>
<li><p><strong>discard_if_enters</strong></p></li>
<li><p><strong>discard_if_exits</strong></p></li>
<li><p><strong>discard_if_ends_inside</strong></p></li>
</ul>
<p>Pathway rules specify clear instructions for how streamlines in the output tractogram should be.</p>
<ol class="arabic simple">
<li><p>If a rule starts with <strong>require</strong>, all streamlines in the tractogram will satisfy this condition.</p></li>
<li><p>If a rule starts with <strong>discard_if</strong>, no streamline meeting this specification will be included in the tractogram.</p></li>
<li><p>If a rule starts with <strong>stop_at_</strong>, streamlines will terminate with respect to this specification.</p></li>
</ol>
<p>The <strong>-pathway=</strong> option specifies rules for the whole connection. Following examples will generate similar tractograms where one end of streamlines will reach the gray matter while the other end may or may not terminate at the gray matter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tutorial 2 - Example 1</span>
<span class="o">./</span><span class="n">trekker</span> <span class="o">-</span><span class="n">fod</span> <span class="n">FOD</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \                            <span class="c1"># Input FOD image</span>
          <span class="o">-</span><span class="n">seed_image</span> <span class="n">THAL</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \                    <span class="c1"># Input seed image</span>
          <span class="o">-</span><span class="n">seed_count</span> <span class="mi">1000</span> \                           <span class="c1"># Number of seeds</span>
          <span class="o">-</span><span class="n">pathway</span><span class="o">=</span><span class="n">require_entry</span> <span class="n">GRAYMATTER</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \   <span class="c1"># A self descriptive pathway rule</span>
          <span class="o">-</span><span class="n">output</span> <span class="n">OUTPUT</span><span class="o">.</span><span class="n">vtk</span>                           <span class="c1"># Output</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tutorial 2 - Example 2</span>
<span class="o">./</span><span class="n">trekker</span> <span class="o">-</span><span class="n">fod</span> <span class="n">FOD</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \                            <span class="c1"># Input FOD image</span>
          <span class="o">-</span><span class="n">seed_image</span> <span class="n">THAL</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \                    <span class="c1"># Input seed image</span>
          <span class="o">-</span><span class="n">seed_count</span> <span class="mi">1000</span> \                           <span class="c1"># Number of seeds</span>
          <span class="o">-</span><span class="n">pathway_A</span><span class="o">=</span><span class="n">require_entry</span> <span class="n">GRAYMATTER</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \ <span class="c1"># A self descriptive pathway rule</span>
          <span class="o">-</span><span class="n">output</span> <span class="n">OUTPUT</span><span class="o">.</span><span class="n">vtk</span>                           <span class="c1"># Output</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tutorial 2 - Example 3</span>
<span class="o">./</span><span class="n">trekker</span> <span class="o">-</span><span class="n">fod</span> <span class="n">FOD</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \                            <span class="c1"># Input FOD image</span>
          <span class="o">-</span><span class="n">seed_image</span> <span class="n">THAL</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \                    <span class="c1"># Input seed image</span>
          <span class="o">-</span><span class="n">seed_count</span> <span class="mi">1000</span> \                           <span class="c1"># Number of seeds</span>
          <span class="o">-</span><span class="n">pathway_B</span><span class="o">=</span><span class="n">require_entry</span> <span class="n">GRAYMATTER</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \ <span class="c1"># A self descriptive pathway rule</span>
          <span class="o">-</span><span class="n">output</span> <span class="n">OUTPUT</span><span class="o">.</span><span class="n">vtk</span>                           <span class="c1"># Output</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If you choose to specify a rule using <strong>-pathway=</strong>, no other rule can start with <strong>-pathway_A=</strong> or <strong>-pathway_B=</strong>. (pathway=satisfy_requirements_in_order is an exception to this.)</p></li>
</ul>
</div>
</section>
<section id="whole-brain-tractography">
<h2>Whole brain tractography<a class="headerlink" href="#whole-brain-tractography" title="Link to this heading">¶</a></h2>
<p>Pathway rules provide useful options for obtaining clean whole brain tractograms.</p>
<p>The following example will generate streamlines where no end will be inside the white matter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tutorial 2 - Example 4</span>
<span class="o">./</span><span class="n">trekker</span> <span class="o">-</span><span class="n">fod</span> <span class="n">FOD</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \                                    <span class="c1"># Input FOD image</span>
          <span class="o">-</span><span class="n">seed_image</span> <span class="n">WHITEMATTER</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \                     <span class="c1"># Input seed image</span>
          <span class="o">-</span><span class="n">seed_count</span> <span class="mi">1000</span> \                                   <span class="c1"># Number of seeds</span>
          <span class="o">-</span><span class="n">pathway</span><span class="o">=</span><span class="n">discard_if_ends_inside</span> <span class="n">WHITEMATTER</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \ <span class="c1"># A self descriptive pathway rule</span>
          <span class="o">-</span><span class="n">output</span> <span class="n">OUTPUT</span><span class="o">.</span><span class="n">vtk</span>                                   <span class="c1"># Output</span>
</pre></div>
</div>
<p>Or even better:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tutorial 2 - Example 5</span>
<span class="o">./</span><span class="n">trekker</span> <span class="o">-</span><span class="n">fod</span> <span class="n">FOD</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \                                    <span class="c1"># Input FOD image</span>
          <span class="o">-</span><span class="n">seed_image</span> <span class="n">WHITEMATTER</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \                     <span class="c1"># Input seed image</span>
          <span class="o">-</span><span class="n">seed_count</span> <span class="mi">1000</span> \                                   <span class="c1"># Number of seeds</span>
          <span class="o">-</span><span class="n">pathway</span><span class="o">=</span><span class="n">discard_if_ends_inside</span> <span class="n">WHITEMATTER</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \ <span class="c1"># A self descriptive pathway rule</span>
          <span class="o">-</span><span class="n">pathway</span><span class="o">=</span><span class="n">discard_if_enters</span> <span class="n">CSF</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \              <span class="c1"># A self descriptive pathway rule</span>
          <span class="o">-</span><span class="n">output</span> <span class="n">OUTPUT</span><span class="o">.</span><span class="n">vtk</span>                                   <span class="c1"># Output</span>
</pre></div>
</div>
<p>The following will create only gray matter to gray matter connections and nothing else:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tutorial 2 - Example 6</span>
<span class="o">./</span><span class="n">trekker</span> <span class="o">-</span><span class="n">fod</span> <span class="n">FOD</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \                                    <span class="c1"># Input FOD image</span>
          <span class="o">-</span><span class="n">seed_image</span> <span class="n">WHITEMATTER</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \                     <span class="c1"># Input seed image</span>
          <span class="o">-</span><span class="n">seed_count</span> <span class="mi">1000</span> \                                   <span class="c1"># Number of seeds</span>
          <span class="o">-</span><span class="n">pathway_A</span><span class="o">=</span><span class="n">require_entry</span> <span class="n">GRAYMATTER</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \         <span class="c1"># A self descriptive pathway rule</span>
          <span class="o">-</span><span class="n">pathway_A</span><span class="o">=</span><span class="n">stop_at_exit</span> <span class="n">GRAYMATTER</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \          <span class="c1"># A self descriptive pathway rule</span>
          <span class="o">-</span><span class="n">pathway_B</span><span class="o">=</span><span class="n">require_entry</span> <span class="n">GRAYMATTER</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \         <span class="c1"># A self descriptive pathway rule</span>
          <span class="o">-</span><span class="n">pathway_B</span><span class="o">=</span><span class="n">stop_at_exit</span> <span class="n">GRAYMATTER</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \          <span class="c1"># A self descriptive pathway rule</span>
          <span class="o">-</span><span class="n">output</span> <span class="n">OUTPUT</span><span class="o">.</span><span class="n">vtk</span>                                   <span class="c1"># Output</span>
</pre></div>
</div>
</section>
<section id="using-atlases-or-labeled-images-in-pathway-rules">
<h2>Using atlases or labeled images in pathway rules<a class="headerlink" href="#using-atlases-or-labeled-images-in-pathway-rules" title="Link to this heading">¶</a></h2>
<p>Labels in segmented images can be used when defining the seed region and/or pathway rules:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tutorial 2 - Example 7</span>
<span class="o">./</span><span class="n">trekker</span> <span class="o">-</span><span class="n">fod</span> <span class="n">FOD</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \                                    <span class="c1"># Input FOD image</span>
          <span class="o">-</span><span class="n">seed_image</span> <span class="n">aseg</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> <span class="mi">16</span> \                         <span class="c1"># Aseg label 16, brain stem, will be used as seed</span>
          <span class="o">-</span><span class="n">seed_count</span> <span class="mi">1000</span> \                                   <span class="c1"># Number of seeds</span>
          <span class="o">-</span><span class="n">pathway</span><span class="o">=</span><span class="n">require_entry</span> <span class="n">aseg</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> <span class="mi">3</span> \               <span class="c1"># Aseg label 3: left cerebral cortex</span>
          <span class="o">-</span><span class="n">pathway</span><span class="o">=</span><span class="n">discard_if_enters</span> <span class="n">aseg</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> <span class="mi">41</span> \          <span class="c1"># Aseg label 41: right cerebral white matter</span>
          <span class="o">-</span><span class="n">output</span> <span class="n">OUTPUT</span><span class="o">.</span><span class="n">vtk</span>                                   <span class="c1"># Output</span>
</pre></div>
</div>
</section>
<section id="tracking-in-order">
<h2>Tracking in order<a class="headerlink" href="#tracking-in-order" title="Link to this heading">¶</a></h2>
<p>Trekker features the option, <strong>-pathway=satisfy_requirements_in_order</strong>, that generates streamlines which satisfy pathway rules in the order that they are defined.</p>
<p>Following example only generates those streamlines that go from the start of ROI_1 till the end of ROI_5 <em>in order</em> where ROI_3 is the seed.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tutorial 2 - Example 8</span>
<span class="o">./</span><span class="n">trekker</span> <span class="o">-</span><span class="n">fod</span> <span class="n">testFOD</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \                    <span class="c1"># Input FOD image</span>
          <span class="o">-</span><span class="n">seed_image</span> <span class="n">ROI_3</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \               <span class="c1"># Input seed image</span>
          <span class="o">-</span><span class="n">seed_count</span> <span class="mi">1000</span> \                       <span class="c1"># Number of seeds</span>
          <span class="o">-</span><span class="n">pathway</span><span class="o">=</span><span class="n">satisfy_requirements_in_order</span> \ <span class="c1"># A self descriptive pathway rule</span>
          <span class="o">-</span><span class="n">pathway_A</span><span class="o">=</span><span class="n">require_entry</span> <span class="n">ROI_4</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \  <span class="c1"># A self descriptive pathway rule</span>
          <span class="o">-</span><span class="n">pathway_A</span><span class="o">=</span><span class="n">require_exit</span> <span class="n">ROI_5</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \   <span class="c1"># A self descriptive pathway rule</span>
          <span class="o">-</span><span class="n">pathway_B</span><span class="o">=</span><span class="n">require_entry</span> <span class="n">ROI_2</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \  <span class="c1"># A self descriptive pathway rule</span>
          <span class="o">-</span><span class="n">pathway_B</span><span class="o">=</span><span class="n">require_exit</span> <span class="n">ROI_1</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> \   <span class="c1"># A self descriptive pathway rule</span>
          <span class="o">-</span><span class="n">output</span> <span class="n">OUTPUT</span><span class="o">.</span><span class="n">vtk</span>                       <span class="c1"># Output</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you use the <strong>-pathway=satisfy_requirements_in_order</strong> option, you can define pathway rules only using <strong>-pathway_A=</strong> or <strong>-pathway_B=</strong>.</p>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../index.html">Table of Contents</a></h3>
<p class="caption" role="heading"><span class="caption-text">Download and install</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/howToGetAndCite.html">Where to get trekker?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/howToGetAndCite.html#test-your-installation">Test your installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/howToGetAndCite.html#extensions">Extensions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Get started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tutorial_1.html">Tutorial 1: The short trek</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorial 2: Trekker’s pathways</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#defining-pathway-rules">Defining pathway rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#whole-brain-tractography">Whole brain tractography</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-atlases-or-labeled-images-in-pathway-rules">Using atlases or labeled images in pathway rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tracking-in-order">Tracking in order</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_3.html">Tutorial 3: Python package usage</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../manual/trekker.html">trekker</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tips</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tips/tip1.html">How to set parameters?</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Publications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../publications/publications.html">How to cite?</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/licenseAndWarranty.html">License and warranty</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/acknowledgements.html">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/contact.html">Contact</a></li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Dogu Baran Aydogan.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.3.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../_sources/tutorials/tutorial_2.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>